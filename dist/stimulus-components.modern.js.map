{"version":3,"file":"stimulus-components.modern.js","sources":["../lib/uploader.js","../src/activestorage_attachments.js","../src/auto_form.js","../src/nested_form.js","../src/scroll_lock.js","../src/sortable.js","../src/textarea_autosize.js"],"sourcesContent":["import { DirectUpload } from '@rails/activestorage'\n\nclass Uploader {\n  constructor (file, options) {\n    this.directUpload = new DirectUpload(\n      file,\n      '/rails/active_storage/direct_uploads',\n      this\n    )\n    this.options = options\n  }\n\n  start () {\n    const promise = new Promise((resolve, reject) => {\n      this.directUpload.create((error, blob) => {\n        if (error) {\n          reject(error)\n        } else {\n          resolve(blob.signed_id)\n        }\n      })\n    })\n\n    return promise.then(this.handleSuccess).catch(this.handleError)\n  }\n\n  handleChange = upload => {\n    this.options.onChangeFile(upload)\n  }\n\n  handleProgress = ({ loaded, total }) => {\n    const progress = (loaded / total) * 100\n\n    this.handleChange({\n      state: 'uploading',\n      file: this.directUpload.file,\n      id: this.options.id,\n      progress\n    })\n  }\n\n  handleSuccess = signedId => {\n    this.handleChange({\n      state: 'finished',\n      id: this.options.id,\n      file: this.directUpload.file,\n      signedId\n    })\n    return signedId\n  }\n\n  handleError = error => {\n    this.handleChange({\n      state: 'error',\n      id: this.options.id,\n      file: this.directUpload.file,\n      error\n    })\n    throw error\n  }\n\n  directUploadWillCreateBlobWithXHR (xhr) {\n    this.options.onBeforeBlobRequest &&\n      this.options.onBeforeBlobRequest({\n        id: this.options.id,\n        file: this.directUpload.file,\n        xhr\n      })\n  }\n\n  directUploadWillStoreFileWithXHR (xhr) {\n    this.options.onBeforeStorageRequest &&\n      this.options.onBeforeStorageRequest({\n        id: this.options.id,\n        file: this.directUpload.file,\n        xhr\n      })\n\n    xhr.upload.addEventListener('progress', this.handleProgress)\n  }\n}\n\nexport default Uploader\n","import { Controller } from '@hotwired/stimulus'\nimport Uploader from '../lib/uploader'\n\nexport default class extends Controller {\n  static targets = ['input', 'file', 'count', 'message']\n  static values = {\n    maxFiles: Number,\n    minFiles: Number,\n    maxMb: Number,\n    maxDimension: Number,\n    whitelist: Array\n  }\n\n  get activeFiles () {\n    return this.fileTargets.filter(div => !div.classList.contains('destroying'))\n  }\n\n  handleFileClick () {\n    if (\n      this.hasMaxFilesValue &&\n      this.activeFiles.length >= this.maxFilesValue\n    ) {\n      this.setMessage('alert', `Maximum files allowed: ${this.maxValue}`)\n      return false\n    }\n\n    this.inputTarget.click()\n  }\n\n  async handleNewFiles (event) {\n    const files = Array.from(event.target.files)\n\n    if (\n      this.hasMaxFilesValue &&\n      files.length + this.activeFiles.length > this.maxFilesValue\n    ) {\n      this.setMessage('alert', `Maximum files allowed: ${this.maxValue}`)\n      return false\n    }\n\n    const approvedFiles = await Promise.all(\n      files.map(file => this.approveFile(file))\n    )\n    const results = approvedFiles.filter(Boolean).map(f => f)\n\n    this.submitFiles(results)\n    this.inputTarget.value = null\n  }\n\n  async approveFile (file) {\n    if (this.hasWhitelistValue && !this.whitelistValue.includes(file.type)) {\n      this.setMessage('alert', `Invalid file type: ${file.name}`)\n      return false\n    }\n\n    if (this.hasmaxMbValue && file.size > this.maxMb) {\n      this.setMessage('alert', `File size too large: ${file.name}`)\n      return false\n    }\n\n    if (this.hasMaxDimensionValue) {\n      const largestDimension = await this.getLargestDimension(file)\n\n      if (largestDimension > this.MaxDimensionValue) {\n        this.setMessage('alert', `Dimensions are too lage: ${file.name}`)\n        return false\n      }\n    }\n\n    return file\n  }\n\n  getLargestDimension (file) {\n    return new Promise(resolve => {\n      const img = new Image()\n      img.src = URL.createObjectURL(file)\n\n      img.onload = () => {\n        const largestDimension = Math.max(img.width, img.height)\n        URL.revokeObjectURL(img.src)\n        resolve(largestDimension)\n      }\n    })\n  }\n\n  createAttachment (event) {\n    return this.element.nestedForm.addAssociation(event)\n  }\n\n  removeAttachment (event) {\n    this.element.nestedForm.removeAssociation(event)\n    this.updateCount()\n  }\n\n  submitFiles (files) {\n    files.forEach(file => {\n      const attachment = this.createAttachment()\n\n      const progressHtml = `\n        <div class=\"upload-progress\">\n          <div class=\"progress-bar\"></div>\n        </div>\n      `\n      attachment.insertAdjacentHTML('beforeend', progressHtml)\n      attachment.querySelector('.filename').innerText = file.name\n\n      if (file.type.includes('image') && attachment.querySelector('img')) {\n        attachment.querySelector('img').src = URL.createObjectURL(file)\n      }\n\n      const uploader = new Uploader(file, {\n        id: attachment.dataset.tempId,\n        onChangeFile: this.handleFileProgress\n      })\n\n      uploader.start()\n    })\n  }\n\n  handleFileProgress = event => {\n    const attachment = document.querySelector(`[data-temp-id=\"${event.id}\"]`)\n\n    switch (event.state) {\n      case 'uploading':\n        attachment.querySelector(\n          '.progress-bar'\n        ).style.width = `${event.progress}%`\n        break\n      case 'error':\n        attachment.remove()\n        this.setMessage('alert', `Error uploading ${event.file.name}.`)\n        break\n      case 'finished': {\n        attachment.querySelector('.upload-progress').remove()\n\n        const hiddenSignedIdField = document.createElement('input')\n\n        hiddenSignedIdField.setAttribute('type', 'hidden')\n        hiddenSignedIdField.setAttribute('value', event.signedId)\n        hiddenSignedIdField.name = attachment\n          .querySelector(\"input[name*='_destroy']\")\n          .name.replace(/_destroy/g, 'file')\n\n        attachment.appendChild(hiddenSignedIdField)\n\n        this.updateCount()\n        break\n      }\n      default:\n        break\n    }\n  }\n\n  updateCount () {\n    if (this.hasCountTarget) {\n      this.countTarget.value = this.activeFiles.length\n    }\n  }\n\n  setMessage (type, message) {\n    console.log(message)\n  }\n}\n","/* global history */\n\nimport { Controller } from '@hotwired/stimulus'\nimport { useDebounce } from 'stimulus-use'\n\nexport default class extends Controller {\n  static debounces = ['submitDebounced']\n  static targets = ['form']\n\n  static values = {\n    debounceWait: { type: Number, default: 150 }\n  }\n\n  connect () {\n    useDebounce(this, { wait: this.debounceWaitValue })\n  }\n\n  submit () {\n    this.formTarget.requestSubmit()\n    this.dispatch('submitted')\n  }\n\n  submitDebounced () {\n    this.formTarget.requestSubmit()\n    this.dispatch('submitted')\n  }\n\n  clearInput (event) {\n    event.target.value = ''\n  }\n\n  resetForm () {\n    this.formTarget.reset()\n  }\n\n  clearForm () {\n    const elements = this.formTarget.elements\n    const outsideElements = document.querySelectorAll(\n      `[form=\"${this.formTarget.id}\"`\n    )\n    const allElements = [...elements, ...outsideElements]\n\n    allElements.forEach(element => {\n      switch (element.type) {\n        case 'checkbox':\n        case 'radio':\n          element.checked = false\n          break\n        default:\n          element.value = ''\n          break\n      }\n    })\n  }\n\n  addQueryString (event) {\n    const params = new URLSearchParams(new FormData(event.target))\n\n    history.replaceState(null, null, `?${params}`)\n  }\n}\n","/* global confirm */\n\nimport { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  static targets = ['list', 'item', 'template', 'defaultTemplate', 'message']\n  static values = {\n    replaceKey: { type: String, default: 'NEW_RECORD' },\n    max: Number,\n    min: Number,\n    confirmRemove: Boolean\n  }\n\n  add (event) {\n    if (!this.#approve()) return false\n\n    const content = this.#setContent(event)\n    this.listTarget.insertAdjacentHTML('beforeend', content)\n\n    const addedElement = this.listTarget.lastElementChild\n    this.dispatch('added', { detail: { element: addedElement, previousEvent: event } })\n  }\n\n  replace (event) {\n    // This method doesnt truly \"replace\" the target element. It inserts the new\n    // template directly after it and then remove the original. It would be nicer\n    // To truly replace the element, but mutating the replaceKey with innerHTML\n    // was making that difficult.\n\n    if (!this.#approve()) return false\n\n    const targetElement = event.detail.element\n    const content = this.#setContent(event)\n\n    targetElement.insertAdjacentHTML('afterend', content)\n    const newElement = targetElement.nextElementSibling\n    targetElement.remove()\n\n    this.dispatch('replaced', { detail: { element: newElement, previousEvent: event } })\n  }\n\n  remove (event) {\n    if (this.confirmRemoveValue) {\n      if (confirm('Are you sure?') === false) {\n        return false\n      }\n    }\n\n    const wrapper = event.target.closest(\"[data-nested-form-target='item']\")\n\n    // New records are simply removed from the page\n    if (wrapper.dataset.newRecord === 'true') {\n      wrapper.remove()\n\n    // Existing records are hidden and flagged for deletion\n    } else {\n      wrapper.querySelector(\"input[name*='_destroy']\").value = 1\n      wrapper.classList.add('hidden', 'destroying')\n    }\n\n    this.dispatch('removed')\n  }\n\n  #findTemplate (name) {\n    const found = this.templateTargets.find(element => element.dataset.templateName === name)\n\n    return found || this.defaultTemplateTarget || this.templateTarget\n  }\n\n  #setContent (event) {\n    const template = this.#findTemplate(event?.target?.value || event?.detail?.template)\n    const tempId = Date.now() * Math.floor(Math.random() * 100)\n    const content = template.innerHTML.replace(\n      new RegExp(this.replaceKeyValue, 'g'), tempId\n    )\n\n    return content\n  }\n\n  #approve () {\n    if (this.hasMaxValue && this.#activeItems.length >= this.maxValue) {\n      console.warn('alert', `Maximum allowed: ${this.maxValue}`)\n      return false\n    } else {\n      return true\n    }\n  }\n\n  get #activeItems () {\n    return this.itemTargets.filter(div => !div.classList.contains('destroying'))\n  }\n}\n","import { Controller } from '@hotwired/stimulus'\n\nexport default class extends Controller {\n  static values = {\n    maxWidth: Number,\n    locked: { type: Boolean, default: false }\n  }\n\n  lock () {\n    this.changeLockedValue(true)\n  }\n\n  unlock () {\n    this.changeLockedValue(false)\n  }\n\n  toggle () {\n    this.changeLockedValue(!this.lockedValue)\n  }\n\n  changeLockedValue (value) {\n    if (!this.checkWidth()) return false\n    this.lockedValue = value\n  }\n\n  lockedValueChanged () {\n    if (this.lockedValue) {\n      document.documentElement.style.overflow = 'hidden'\n    } else {\n      document.documentElement.style.overflow = null\n    }\n  }\n\n  checkWidth () {\n    if (!this.hasMaxWidthValue) return true\n\n    const mediaQuery = window.matchMedia(`(max-width: ${this.maxWidthValue}px)`)\n\n    return mediaQuery.matches\n  }\n}\n","import { Controller } from '@hotwired/stimulus'\nimport Sortable from 'sortablejs'\nimport { v4 as uuidv4 } from 'uuid'\n\nexport default class extends Controller {\n  static targets = ['position']\n  static values = {\n    options: Object\n  }\n\n  initialize () {\n    const defaultOptions = {\n      group: uuidv4(),\n      animation: 150,\n      onEnd: this.end.bind(this),\n      filter: 'input, button, select, textarea',\n      ghostClass: 'opacity-25',\n      preventOnFilter: false,\n      forceFallback: true\n    }\n\n    this.sortable = Sortable.create(this.element, {\n      ...{ ...defaultOptions, ...this.optionsValue },\n      onEnd: this.end.bind(this)\n    })\n  }\n\n  update () {\n    this.positionTargets.forEach((position, index) => (position.value = index))\n  }\n\n  end () {\n    this.update()\n  }\n}\n","import { Controller } from '@hotwired/stimulus'\nimport autosize from 'autosize'\n\nexport default class extends Controller {\n  connect () {\n    autosize(this.element)\n  }\n}\n"],"names":["Uploader","constructor","file","options","handleChange","upload","this","onChangeFile","handleProgress","loaded","total","state","directUpload","id","progress","handleSuccess","signedId","handleError","error","DirectUpload","start","Promise","resolve","reject","create","blob","signed_id","then","catch","directUploadWillCreateBlobWithXHR","xhr","onBeforeBlobRequest","directUploadWillStoreFileWithXHR","onBeforeStorageRequest","addEventListener","_class","Controller","args","super","handleFileProgress","event","attachment","document","querySelector","style","width","remove","setMessage","name","hiddenSignedIdField","createElement","setAttribute","replace","appendChild","updateCount","activeFiles","fileTargets","filter","div","classList","contains","handleFileClick","hasMaxFilesValue","length","maxFilesValue","maxValue","inputTarget","click","async","files","Array","from","target","results","all","map","approveFile","Boolean","f","submitFiles","value","hasWhitelistValue","whitelistValue","includes","type","hasmaxMbValue","size","maxMb","hasMaxDimensionValue","getLargestDimension","MaxDimensionValue","img","Image","src","URL","createObjectURL","onload","largestDimension","Math","max","height","revokeObjectURL","createAttachment","element","nestedForm","addAssociation","removeAttachment","removeAssociation","forEach","insertAdjacentHTML","innerText","dataset","tempId","hasCountTarget","countTarget","message","console","log","targets","values","maxFiles","Number","minFiles","maxDimension","whitelist","connect","useDebounce","wait","debounceWaitValue","submit","formTarget","requestSubmit","dispatch","submitDebounced","clearInput","resetForm","reset","clearForm","elements","querySelectorAll","checked","addQueryString","params","URLSearchParams","FormData","history","replaceState","debounces","debounceWait","default","add","_classPrivateFieldLooseBase","content","listTarget","detail","lastElementChild","previousEvent","_approve","targetElement","_setContent","newElement","nextElementSibling","confirmRemoveValue","confirm","wrapper","closest","newRecord","templateTargets","find","templateName","defaultTemplateTarget","templateTarget","_event$target","_event$detail","template","_findTemplate","Date","now","floor","random","innerHTML","RegExp","replaceKeyValue","hasMaxValue","warn","_get_activeItems","itemTargets","replaceKey","String","min","confirmRemove","lock","changeLockedValue","unlock","toggle","lockedValue","checkWidth","lockedValueChanged","documentElement","overflow","hasMaxWidthValue","window","matchMedia","maxWidthValue","matches","maxWidth","locked","initialize","defaultOptions","group","uuidv4","animation","onEnd","end","bind","ghostClass","preventOnFilter","forceFallback","sortable","Sortable","_extends","optionsValue","update","positionTargets","position","index","Object","autosize"],"mappings":"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"}